# Chapter 3: Loops, loops, and more loops
## What this lecture will cover...
### Loops  
- What they are  
- Different parts of a loop  
- Different types of loops  
	- while loop  
	- for loop  
	- do-while loop  
- Nested loops  
- How to use loops to process user input
### Background
With most programs we write, we will want to repeat a specific  
action/task/chunk of code more than once.  
###### Examples:  
	- Processing user input.  
	- ATMs: The menu loops until the user selects the option to quit.  
- Loops in programming allow us to repeat a chunk of code as many times  
as we want without having to retype the code over and over again.  
- C++ has the following loops available:  
	- `while`
	- `for `
	- `do-while`
### General Format for Loops
- Regardless of the loop type, there are important “parts” of a loop that you should keep in mind  
to make sure it works properly.  
- Initialization Statement
	- The initialization statement will initialize the variable that will control the loop, or the loop control variable (LCV).
	This variable will be the main determinant of how many times the loop will execute and will typically be part of the loop condition.  
-  Loop Condition
	- For while and for loops, this condition must evaluate to TRUE in order for the loop to begin and continue. (do-while is a little different).  
	- The LCV value is typically checked here.  
	- Once this condition evaluates to FALSE, the program breaks out of the loop and proceeds to the statement directly after the end of the loop.  
	- The condition can be made up of a Boolean expression, Boolean variables, integers, cin statements, etc.  
-  Body
	- Contains the statements/code that you wish to repeat while the loop runs.  
	- The loop body is able to use variables that are declared outside of the loop, and you can declare new variables inside the loop. Loop variables will only exist while the loop is running.  
-  Update Statement
	- At some point in your loop, you need to make sure to update the LCV so that eventually your loop will end.  
	- Without this, you risk having an infinite loop.

### `while` Loop
The while loop executes a block of code repeatedly WHILE its condition  
continues to evaluate to TRUE.  
###### C++ Syntax
```c++
initialization statement;
while(condition){
	//Body of loop
	//Update statement;
}
```

### Example: Write a program to display “Hello” 100 times
```mermaid
graph TD;
    A([Start]):::Green-->B;
    B[Count = 0]:::Yellow-->C;
    C{{count < 100?}}:::Purple--No-->D;
    C--Yes-->E;
    E[Output 'Hello']:::Purple-->F;
    F[count++]:::Purple-->C
	D[Output 'Goodbye']:::Yellow-->H([End]):::Red;
	classDef Red fill:#d05e56;
	classDef Yellow fill:#d8a027, color:#000;
	classDef Green fill:#448d7a;
	classDef Purple fill:#e275e7, color:#000;
```
```c++
/*
 * The following program will use a while loop to display 
 * "Hello" 100 times
 */
#include <iostream>
using namespace std;

int main()
{
	//initialization statement
	int count = 0; // 1) Count set to 0
	//the beginning of the while loop
	while(count < 100) // 2) The condition is checked, if true, loop starts
	{
		//the body of the loop
		cout << "\tHello\n";
		count++; // 3) This code runs, count increased by 1
	} // 4) go back to 2)
	cout << "Goodbye!\n"; // 5) as soon as condition is false, will go to line directly after loop
	return 0;
}
```

### Example: Write a program that prompts the user for 5 positive integers, and prints the sum.



```mermaid
graph TD;
    A([Start]):::Green-->B;
    B[sum, count, num = 0]:::Yellow-->C;
    C{{count < 5?}}:::Purple--No-->D;
    C--Yes-->E;
    E[Take user input]:::Purple-->F;
    F{{num<=0?}}:::DarkPurple--No-->G;
    F--Yes-->I;
    I[Add input to summation]:::DarkPurple-->J;
    J[increase count]:::DarkPurple-->C
    G[Output 'Integer must be positive']:::DarkPurple-->C
	D[Output 'Goodbye']:::Yellow-->H([End]):::Red;
	classDef Red fill:#d05e56;
	classDef Yellow fill:#d8a027, color:#000;
	classDef Green fill:#448d7a;
	classDef Purple fill:#e275e7, color:#000;
	classDef DarkPurple fill:#a235a7, color:#000;
```
```c++
/*
 * This program prompts the user for 5 positive integers and prints 
 * their sum
 */
#include <iostream>
using namespace std;

int main()
{
	//initialize variables
	int sum = 0, num = 0, count = 0;
	//start of while loop
	while(count < 5){
		//body of the loop that will repeat
		cout << "Enter a positive number:";
		cin >> num;
		//check that it is positive
		if(num<=0)
			cout << "The integer must be greater than zero!\n";
		else{
			//positive int
			sum += num;//same as sum = sum + num
			count++; //increase count by 1
		}
	}//end of while
	cout << "The sum of the 5 integers is: " << sum << "\n";
	return 0;
}

```

### Using `cin.fail()`, `cin.clear()` & `cin.ignore()`
The reason our loop goes into an infinite loop is because when we enter a character or  
string when cin expects an integer, it goes into a “failed state”.  
- What is cin>> ?
	- cin is actually an input stream OBJECT.  
	- In Chapter 5 will learn that objects have different values associated with them, and in this case cin has a  value that represents its “state”.
	- When it is in a “good” state, it allows for user input.
	- When it is in a “bad” or “failed” state, it does not allow input.
- Our loop runs infinitely because cin remains in a failed state, and does not allow for a new value to be input, which means the LCV “count” is never updated.
- We can fix this with:
	- Check if cin is in a failed state with cin.fail(), if it returns “true”, we know it’s no bueno.  
	- cin.clear(); // resets the state of cin back to “good”  
	- cin.ignore(1000,’\n’); // will flush any unwanted data from the input stream